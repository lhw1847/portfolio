<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <link rel="stylesheet" href="assets/css/style.css" />
        <link rel="stylesheet" href="assets/css/reset.css" />
        <link rel="stylesheet" media="screen" href="https://fontlibrary.org//face/chicagoflf" type="text/css" />
    </head>
    <body>
        <div class="monitor">
            <img src="assets/img/1920monitor.png" alt="monitor" />
        </div>
        <div class="background">
            <!-- option bar -->
            <div class="option_bar">
                <ul>
                    <li>
                        <span><img src="assets/img/appleicon.png" alt="logo" /></span>
                        <ul class="submenu">
                            <p>About This Computer</p>
                            <li><img src="#" alt="#" />1</li>
                            <li><img src="#" alt="#" />2</li>
                            <li><img src="#" alt="#" />3</li>
                            <li><img src="#" alt="#" />4</li>
                            <li><img src="#" alt="#" />5</li>
                        </ul>
                    </li>
                    <li>
                        <span>About</span>
                        <ul class="submenu">
                            <p>Record</p>
                            <li><img src="#" alt="#" />1</li>
                            <li><img src="#" alt="#" />2</li>
                            <li><img src="#" alt="#" />3</li>
                            <li><img src="#" alt="#" />4</li>
                            <li><img src="#" alt="#" />5</li>
                        </ul>
                    </li>
                    <li>
                        <span>Script</span>
                        <ul class="submenu">
                            <p>asd</p>
                            <li><img src="#" alt="#" />Tetris Game</li>
                            <li><img src="#" alt="#" />Music App</li>
                            <li><img src="#" alt="#" />Typing Game</li>
                            <li><img src="#" alt="#" />Card Game</li>
                            <li><img src="#" alt="#" />5</li>
                        </ul>
                    </li>
                    <li>
                        <span>Animation</span>
                        <ul class="submenu">
                            <p>asd</p>
                            <li><img src="#" alt="#" />1</li>
                            <li><img src="#" alt="#" />2</li>
                            <li><img src="#" alt="#" />3</li>
                            <li><img src="#" alt="#" />4</li>
                            <li><img src="#" alt="#" />5</li>
                        </ul>
                    </li>
                    <li>
                        <span>Contact</span>
                        <ul class="submenu">
                            <p>asd</p>
                            <li><img src="#" alt="#" />1</li>
                            <li><img src="#" alt="#" />2</li>
                            <li><img src="#" alt="#" />3</li>
                            <li><img src="#" alt="#" />4</li>
                            <li><img src="#" alt="#" />5</li>
                        </ul>
                    </li>
                    <li>
                        <span>Record</span>
                        <ul class="submenu">
                            <p>asd</p>
                            <li><img src="#" alt="#" />1</li>
                            <li><img src="#" alt="#" />2</li>
                            <li><img src="#" alt="#" />3</li>
                            <li><img src="#" alt="#" />4</li>
                            <li><img src="#" alt="#" />5</li>
                        </ul>
                    </li>
                </ul>
            </div>
            <!-- //option bar -->

            <!-- tool bar -->
            <div class="tool_bar">
                <div class="time"></div>
            </div>
            <!-- //tool bar -->

            <!-- desktop -->
            <div class="desktop">
                <!-- system folder -->
                <div class="icon folder system-folder">
                    <div>
                        <img src="assets/img/icon/Folder/open-directory.png" alt="directory" />
                    </div>
                    <span>System</span>
                </div>
                <!-- //system folder -->

                <!-- system folder window -->
                <div class="folder-window system-window">
                    <div class="window_title_bar">
                        <div class="title_bar_close_bar">
                            <button class="close"></button>
                            <img class="title_bar" src="assets/img/Icon/Window/title-bar.svg" alt="" />
                        </div>
                        <div class="title_bar_title">
                            <img src="assets/img/icon/Folder/open-directory.png" alt="directory" />
                            <h4>System</h4>
                        </div>
                        <div class="title_bar_zoom_bar">
                            <img class="title_bar" src="assets/img/Icon/Window/title-bar.svg" alt="" />
                            <button class="zoom"></button>
                            <button class="collapse"></button>
                        </div>
                    </div>
                    <div class="window_main">
                        <div class="window_contents_bar">
                            <span><em>0</em><p> items,</p><em> 0</em><p> GB</p><p> available</p></span>
                        </div>
                        <div class="window_contents system_contents"></div>
                    </div>
                </div>
                <!-- //system folder window -->

                <!-- trash -->
                <div class="icon trash">
                    <div>
                        <img src="assets/img/Icon/System/trash-empty.png" alt="trash" />
                    </div>
                    <span class="span">Trash</span>
                </div>
                <!-- //trash -->

                <div class="folder-window trash-window">
                    <div class="window_title_bar">
                        <div class="title_bar_close_bar">
                            <button class="close"></button>
                            <img class="title_bar" src="assets/img/Icon/Window/title-bar.svg" alt="" />
                        </div>
                        <div class="title_bar_title">
                            <img src="assets/img/icon/System/trash-empty.png" alt="trash" />
                            <h4>Trash</h4>
                        </div>
                        <div class="title_bar_zoom_bar">
                            <img class="title_bar" src="assets/img/Icon/Window/title-bar.svg" alt="" />
                            <button class="zoom"></button>
                            <button class="collapse"></button>
                        </div>
                    </div>
                    <div class="window_main">
                        <div class="window_contents_bar">
                            <span><em>1</em> items</span>
                            <span class="delete">delete</span>
                        </div>
                        <div class="window_contents trash_contents"></div>
                    </div>
                </div>

                <!-- warning -->
                <div class="empty-trash-window">
                    <div class="window_title_bar" style=" width: 100%; margin-top: auto;">
                    </div>
                    <div class="empty-img-text">
                        <img src="assets/img/Icon/System/trash-full.png" alt="trash-empty">
                    <div class="warning">
                        <span>Are you sure want to permanently erase
                            the items in the Trash?
                        </span>
                        <p>You can't undo this action</p>
                    </div>
                    </div>
                    <div class="trash_btn">
                        <button class="cancle">Cancle</button>
                        <button class="empty">Empty Trash</button>
                    </div>
                </div>
                <!-- //warning -->
            </div>
            <!-- //desktop -->
        </div>

        <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <!-- <link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css" /> -->
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
        <script>
            const submenuWrap = $(".option_bar > ul > li");

            var zIndex = 1;
            $("*").click(function(){
                zIndex++;
                $(this).css("zIndex", zIndex);
            })
            $(".icon").draggable({
                containment: ".desktop.ui-droppable",
                accept: ".window_contents",
                start: function () {
                    zIndex++;
                    $(this).css("zIndex", zIndex);
                    console.log("icon move");
                },
                drag: function(event, ui){
                    // var dragIcon = document.querySelector(".icon").getBoundingClientRect();
                    // console.log(dragIcon)
                    // var window = document.querySelectorAll(".window_contents").forEach(el => {
                    //     el.getBoundingClientRect();
                    // })
                    // var window = document.querySelector(".window_contents").getBoundingClientRect();
                    // console.log(window.bottom,window.top)
                    // console.log(window.left,window.right)
                },
                stop: function( event, ui ) {
                    var dragIcon = document.querySelector(".icon").getBoundingClientRect();
                    var window = document.querySelector(".system_contents").getBoundingClientRect();
                    console.log(window.left,window.right);
                    if (window.left < dragIcon.x + dragIcon.width && dragIcon.x + dragIcon.width < window.right){
                        $(".system_contents").prepend($(this));
                        $(".system_contents").find(".icon").css("position", "static");
                    } else {
                        $(".desktop").prepend($(this));
                        $(".window_contents").find(".icon").css("position", "relative");
                    }
                }
            });
            $(".window_contents .icon").draggable();
            $(".empty-trash-window").draggable({
                start: function () {
                    zIndex++;
                    $(this).css("zIndex", zIndex);
                    console.log("empty trash text window move");
                },
                handle: ".window_title_bar",
            });
            // $(".trash-window .window_contents .icon").draggable();

            $(".icon.trash").droppable({
                accept: ".icon",
                drop: function( event, ui ) {
                    $(".trash-window .window_contents").append( ui.draggable );

                    console.log(event)
                    $(".icon").css("position","static");
                    zIndex=+2;
                    $(this).css("zIndex", zIndex);
                    // $(".icon").removeClass("ui-draggable");
                    // $(".icon").removeClass("ui-draggable-handle");
                    // setTimeout(() => {
                    //     $(".icon").draggable();
                    // }, 10);
                }
            });
            // $(".folder-window .window_contents .icon").draggable();
            $(".desktop").droppable({
                accept: ".folder-window .window_contents .icon",

                drop: function( event, ui ) {
                    $(".icon").draggable({
                        helper: "clone"
                    })
                    // $(this).html( ui.draggable );
                    recycleImage( ui.draggable );
                    console.log(ui + "ss")
                    // $(".icon").css("position","static");
                }
            });
            function recycleImage( $item ) {
                $item.show(function() {
                    $item
                    .appendTo( ".desktop" )
                    .show();
                    zIndex=+2;
                    $(this).css("zIndex", zIndex);
                });
            }





























            //메뉴
            submenuWrap.mouseenter(function () {
                $(this).find(".submenu").stop().show();
                console.log("menu show");
            });

            submenuWrap.mouseleave(function () {
                $(this).find(".submenu").stop().hide();
                console.log("menu hide");
            });
            $(".submenu li").mouseover(function () {
                console.log("submenu hover");
            });
            //directory open
            $(".system-folder").dblclick(function () {
                zIndex++;
                $(".system-window").css("zIndex", zIndex);
                $(".system-window").stop().fadeIn();
                console.log("system directory folder window show");
            });
            $(".trash").dblclick(function () {
                zIndex++;
                $(".trash-window").css("zIndex", zIndex);
                $(".trash-window").stop().fadeIn();
                console.log("trash directory folder window show");
            });
            //directory close
            $(".system-window")
                .find(".close")
                .click(function () {
                    $(".system-window").stop().fadeOut();
                    console.log("system directory folder window hide");
                });
            $(".trash-window")
                .find(".close")
                .click(function () {
                    $(".trash-window").fadeOut();
                    console.log("trash directory folder window hide");
                });
            //directory collapse
            $(".system-window")
                .find(".collapse")
                .click(function () {
                    $(".system-window").toggleClass("close");
                    console.log("system directory folder window collapse");
                });
            $(".trash-window")
                .find(".collapse")
                .click(function () {
                    $(".trash-window").toggleClass("close");
                    console.log("system directory folder window collapse");
                });
            //directory move
            $(".folder-window").draggable({
                start: function () {
                    console.log("system directory folder window move");
                },
                handle: ".window_title_bar",
            });

            $(".trash-window .delete").click(function(){
                var zIndex = 100;
                zIndex++;
                $(".empty-trash-window").css("zIndex", zIndex);
                $(".empty-trash-window").stop().show();
                console.log("empty trash text window show");
            })

            $(".empty-trash-window .cancle").click(function(){
                $(".empty-trash-window").stop().hide();
                console.log("empty trash text window hide");
            })

            $(".empty").click(function(){
                $(".trash-window .icon").remove();
                $(".empty-trash-window").stop().hide();
                return;
            })
            // 시간
            function printTime() {
                var clock = document.querySelector(".time");
                var now = new Date();
                var hours = now.getHours();
                var minutes = now.getMinutes();
                var ampm = hours >= 12 ? "pm" : "am";
                hours = hours % 12;
                hours = hours ? hours : 12; // the hour '0' should be '12'
                minutes = minutes < 10 ? "0" + minutes : minutes;
                var strTime = hours + ":" + minutes + " " + ampm;
                clock.innerText = strTime;
                setTimeout("printTime()", 1000);
            }
            window.onload = function () {
                printTime();
            };
        </script>
    </body>
</html>
